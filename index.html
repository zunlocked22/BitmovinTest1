<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Smart IPTV with Bitmovin</title>
  <script src="https://cdn.bitmovin.com/player/web/8/bitmovinplayer.js"></script>
  <style>
    body {
      background-color: #111;
      color: white;
      text-align: center;
      font-family: 'Segoe UI', sans-serif;
    }
    #player {
      width: 90%;
      max-width: 800px;
      margin: 20px auto;
      border: 4px solid #00ffff;
      border-radius: 16px;
      box-shadow: 0 0 20px #00ffffaa;
    }
    select {
      margin-top: 20px;
      padding: 10px;
      font-size: 1.1em;
      background-color: #222;
      color: white;
      border: 1px solid #00ffff;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <h1>AZ IPTV (Bitmovin)</h1>

  <select id="channel">
    <option value="gma">GMA 7 (Widevine)</option>
    <option value="crave1">Crave 1 (ClearKey)</option>
  </select>

  <div id="player"></div>

  <script>
    const channels = {
      gma: {
        title: "GMA 7",
        dash: 'http://143.44.136.110:6910/001/2/ch00000090990000001093/manifest.mpd?virtualDomain=001.live_hls.zte.com',
        drm: {
          widevine: {
            LA_URL: 'http://143.44.136.74:9443/widevine/?deviceId=02:00:00:00:00:00'
          }
        }
      },
      crave1: {
        title: "Crave 1",
        dash: 'https://live-crave.video.9c9media.com/137c6e2e72e1bf67b82614c7c9b216d6f3a8c8281748505659713/fe/f/crave/crave1/manifest.mpd',
        drm: {
          clearkey: {
            key: 'df97e849d68479ec16e395feda7627d0',
            keyId: '4a107945066f45a9af2c32ea88be60f4'
          }
        }
      }
    };

    const playerConfig = {
      key: 'a187fd07-546d-4313-ae17-3ffe8247a9b2',
      playback: {
        autoplay: true,
        muted: false
      }
    };

    const source = {};
    const container = document.getElementById('player');
    const player = new bitmovin.player.Player(container, playerConfig);

    function loadChannel(key) {
      const channel = channels[key];

      const sourceConfig = {
        title: channel.title,
        dash: channel.dash,
        drm: channel.drm
      };

      player.load(sourceConfig).then(() => {
        console.log('Playing:', channel.title);
      }).catch(e => {
        console.error('Error:', e);
        alert('Playback error!');
      });
    }

    document.getElementById('channel').addEventListener('change', (e) => {
      loadChannel(e.target.value);
    });

    // Load default
    loadChannel('gma');
  </script>
</body>
</html>
